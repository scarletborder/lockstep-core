
# Lockstep Client React 测试应用 - 快速开始

## 🚀 30 秒快速开始

### 步骤 1: 启动应用
```bash
cd example/react-app
pnpm install
pnpm run dev
```

### 步骤 2: 打开浏览器
访问 `http://localhost:5173`

### 步骤 3: 运行第一个测试
1. 点击右上角 "⚙️ 配置"，确认服务器地址
2. 在左侧 "HTTP 请求测试" 输入房间 ID: `test-room-001`
3. 点击 "创建房间"
4. 点击 "加入房间"
5. 观察右侧消息日志的实时输出

## 🎮 界面预览

```
┌────────────────────────────────────────────────────────────────┐
│  🎮 Lockstep Client 测试面板             [⚙️ 配置] ← 点击配置  │
│                                                                │
│  完整测试 WebTransport 和 HTTP 功能                             │
└────────────────────────────────────────────────────────────────┘

┌─────────────────┬──────────────────┬──────────────────────────┐
│ 🌐 HTTP 请求测试 │  🎮 游戏请求测试   │  📋 消息日志             │
│                 │                  │                          │
│ [房间 ID 输入]   │  基础消息          │  [时间] [类型] 内容      │
│ [获取房间列表]   │  - 帧ID/确认帧ID   │  13:45:20 [大厅] 加入成功│
│ [创建房间]      │  - 心跳           │  13:45:22 [房间] 房间信息│
│                 │                  │  13:45:25 [状态] 已连接   │
│ 房间列表(3)     │  房间准备          │  ...                    │
│ • test-room-001 │  ☑ 准备状态       │  [清空]                  │
│ • test-room-002 │  [发送准备]       │                          │
│ • game-room-01  │                  │                          │
│                 │  地图选择          │                          │
├─────────────────┤  章节ID: [1]      │                          │
│ 🔌 WebTransport │  关卡ID: [1]      │                          │
│   连接          │  [选择地图]       │                          │
│                 │  [离开选择]       │                          │
│ 状态: ● 已连接   │                  │                          │
│ 房间: test-room │  加载状态          │                          │
│ 玩家ID: 1       │  ☑ 加载完成       │                          │
│                 │  [发送加载]       │                          │
│ [房间 ID 输入]   │                  │                          │
│ [加入房间]      │  游戏操作          │                          │
│ [断开连接]      │  行:[0] 列:[0]    │                          │
│                 │  卡片:[1]         │                          │
│ 重连密钥:abc123 │  [种植][移除植物]  │                          │
│ [使用密钥重连]   │  [星星碎片]       │                          │
│                 │  [结束游戏]       │                          │
├─────────────────┤                  │                          │
│ ⚡ 快速测试      │                  │                          │
│                 │                  │                          │
│ [完整流程测试]   │                  │                          │
│ [重连流程测试]   │                  │                          │
│ [消息压力测试]   │                  │                          │
│                 │                  │                          │
└─────────────────┴──────────────────┴──────────────────────────┘
```

## 📊 功能一览

### 左列 - 连接管理
- ✅ HTTP 房间管理
- ✅ WebTransport 连接控制
- ✅ 一键快速测试

### 中列 - 游戏测试
- ✅ 所有游戏消息类型
- ✅ 可调参数
- ✅ 实时发送

### 右列 - 实时监控
- ✅ 所有消息日志
- ✅ 颜色分类
- ✅ 时间戳

## 🎯 推荐测试顺序

### 新手推荐 🌟
1. 点击 "完整流程测试" - 自动完成所有步骤
2. 观察消息日志了解交互过程
3. 尝试手动操作各个按钮

### 进阶测试 🔥
1. 手动创建和加入房间
2. 逐个测试游戏消息
3. 尝试重连功能
4. 运行压力测试

### 调试场景 🐛
1. 制造错误场景（如加入不存在的房间）
2. 测试边界条件
3. 查看日志定位问题

## 🎨 视觉指南

### 连接状态颜色
- 🔴 红色: 错误
- 🟡 黄色: 连接中/重连中
- 🟢 绿色: 已连接
- ⚪ 灰色: 未连接

### 消息类型颜色
- 🔵 蓝色: 大厅消息
- 🟣 紫色: 房间消息  
- 🔴 红色: 错误
- 🟡 黄色: 状态变化
- ⚪ 灰色: 信息

### 按钮状态
- 亮色可点击: ✅ 可用
- 灰色禁用: ⛔ 不可用

## 💡 小贴士

1. **首次使用**: 先点击 "完整流程测试" 了解整体流程
2. **查看详情**: 在消息日志中查看所有交互细节
3. **调试问题**: 打开浏览器开发者工具 (F12) 查看更多信息
4. **保持整洁**: 测试完一个场景后点击 "清空" 清理日志
5. **重连测试**: 断开连接后会自动保存密钥，可以直接点击重连

## ⚙️ 配置说明

### 服务器 URL
- 默认: `https://127.0.0.1:4433`
- 可修改为任何有效的服务器地址

### 安全选项
- **允许自签名证书**: 开发环境必须启用
- **允许不安全传输**: 测试环境建议启用
- **允许任何证书**: 本地测试建议启用

## 🆘 快速问题解决

| 问题 | 解决方法 |
|------|---------|
| 无法连接 | 检查服务器是否运行，URL 是否正确 |
| 按钮灰色 | 检查连接状态，某些操作需要特定状态 |
| 收不到消息 | 查看消息日志，确认连接状态 |
| 创建房间失败 | 可能房间已存在，尝试其他 ID |
| 重连失败 | 确保房间仍存在且密钥正确 |

## 📚 更多文档

- [README.md](README.md) - 完整功能介绍
- [TESTING_GUIDE.md](TESTING_GUIDE.md) - 详细测试指南
- [IMPLEMENTATION_SUMMARY.md](IMPLEMENTATION_SUMMARY.md) - 实现总结

## 🎉 开始测试吧！

现在你已经了解了基础操作，可以开始探索所有功能了。祝测试愉快！

有问题？查看上面的文档或开发者工具控制台。
